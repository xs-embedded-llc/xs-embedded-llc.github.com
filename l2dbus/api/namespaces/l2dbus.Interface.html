<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Lua-To-D-Bus (L2DBUS) Documentation</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>L2DBUS</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
<li><a href="#Tables">Tables</a></li>
<li><a href="#Interface">Interface</a></li>
</ul>


<h2>Namespaces</h2>
<ul>
  <li><a href="../namespaces/l2dbus.Connection.html">l2dbus.Connection</a></li>
  <li><a href="../namespaces/l2dbus.Dbus.html">l2dbus.Dbus</a></li>
  <li><a href="../namespaces/l2dbus.DbusTypes.html">l2dbus.DbusTypes</a></li>
  <li><a href="../namespaces/l2dbus.Dispatcher.html">l2dbus.Dispatcher</a></li>
  <li><a href="../namespaces/l2dbus.Int64.html">l2dbus.Int64</a></li>
  <li><strong>l2dbus.Interface</strong></li>
  <li><a href="../namespaces/l2dbus.Introspection.html">l2dbus.Introspection</a></li>
  <li><a href="../namespaces/l2dbus.Match.html">l2dbus.Match</a></li>
  <li><a href="../namespaces/l2dbus.Message.html">l2dbus.Message</a></li>
  <li><a href="../namespaces/l2dbus.PendingCall.html">l2dbus.PendingCall</a></li>
  <li><a href="../namespaces/l2dbus.ServiceObject.html">l2dbus.ServiceObject</a></li>
  <li><a href="../namespaces/l2dbus.Timeout.html">l2dbus.Timeout</a></li>
  <li><a href="../namespaces/l2dbus.Trace.html">l2dbus.Trace</a></li>
  <li><a href="../namespaces/l2dbus.Uint64.html">l2dbus.Uint64</a></li>
  <li><a href="../namespaces/l2dbus.Watch.html">l2dbus.Watch</a></li>
</ul>
<h2>Modules</h2>
<ul>
  <li><a href="../modules/l2dbus.html">l2dbus</a></li>
  <li><a href="../modules/l2dbus-ev.html">l2dbus-ev</a></li>
  <li><a href="../modules/l2dbus-glib.html">l2dbus-glib</a></li>
  <li><a href="../modules/l2dbus.msgbusctrl.html">l2dbus.msgbusctrl</a></li>
  <li><a href="../modules/l2dbus.proxyctrl.html">l2dbus.proxyctrl</a></li>
  <li><a href="../modules/l2dbus.service.html">l2dbus.service</a></li>
  <li><a href="../modules/l2dbus.validate.html">l2dbus.validate</a></li>
  <li><a href="../modules/l2dbus.xml.html">l2dbus.xml</a></li>
</ul>
<h2>Topics</h2>
<ul>
  <li><a href="../topics/01-introduction.md.html">01-introduction.md</a></li>
</ul>

</div>

<div id="content">

<h1>Namespace <code>l2dbus.Interface</code></h1>

<p>L2DBUS Interface</p>

<p> This section describes a Lua Interface class.</p>
<p> This class is used to
 define an interface in D-Bus terms so that services can be offered on
 the D-Bus that support a specific API.</p>

<p> Once created, interfaces are typically associated with one (or more)
 D-Bus service objects. The interface itself can be configured to
 receive and handle client requests. If <strong>not</strong> handled by the interface
 the associated service object is given the opportunity to handle the
 request.</p>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#new">new&nbsp;(interface, handler, userToken)</a></td>
	<td class="summary">

</td>
	</tr>
</table>
<h2><a href="#Tables">Tables</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#IntrospectProp">IntrospectProp</a></td>
	<td class="summary">This table that defines an individual D-Bus property item in an interface
 description.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#IntrospectArg">IntrospectArg</a></td>
	<td class="summary">This table that defines an individual method/signal argument in an interface
 description.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#IntrospectItem">IntrospectItem</a></td>
	<td class="summary">This table that defines a D-Bus method or signal exposed by an interface.</td>
	</tr>
</table>
<h2><a href="#Interface">Interface</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#name">name&nbsp;(interface)</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#setData">setData&nbsp;(interface, data)</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#getData">getData&nbsp;(interface)</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#registerMethods">registerMethods&nbsp;(interface, methods)</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#clearMethods">clearMethods&nbsp;(interface)</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#registerSignals">registerSignals&nbsp;(interface, signals)</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#clearSignals">clearSignals&nbsp;(interface)</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#registerProperties">registerProperties&nbsp;(interface, properties)</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#clearProperties">clearProperties&nbsp;(interface)</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#introspect">introspect&nbsp;(interface)</a></td>
	<td class="summary">

</td>
	</tr>
</table>

<br/>
<br/>


    <h2><a name="Functions"></a>Functions</h2>
    <dl class="function">
    <dt>
    <a name = "new"></a>
    <strong>new&nbsp;(interface, handler, userToken)</strong>
    </dt>
    <dd>
     </p>

<p> Creates a new Interface.</p>

<p> Creates an empty D-Bus Interface used to describe the API of of a service.
 With the interface there can be associated a handler that can process
 client requests. The signature of the handler has the form:</p>

<pre><code> DBusHandlerResult function onRequest(interface, conn, msg, userToken)
</code></pre>

<p> Where:</p>

<p> <ul>
 <li><em>interface</em>  - The D-Bus interface associated with the handler</li>
 <li><em>conn</em>       - The D-Bus connection from which the request was received</li>
 <li><em>msg</em>        - The D-Bus request message</li>
 <li><em>userToken</em>  - A value specified by the user when the interface was created.</li>
 </ul></p>

<p> The handler function should return one of the following values:</p>

<p> <ul>
 <li><a href="../namespaces/l2dbus.Dbus.html#HANDLER_RESULT_HANDLED">HANDLER_RESULT_HANDLED</a> - Request handled</li>
 <li><a href="../namespaces/l2dbus.Dbus.html#HANDLER_RESULT_NOT_YET_HANDLED">HANDLER_RESULT_NOT_YET_HANDLED</a> - Request <strong>not</strong> handled</li>
 <li><a href="../namespaces/l2dbus.Dbus.html#HANDLER_RESULT_NEED_MEMORY">HANDLER_RESULT_NEED_MEMORY</a> - Request <strong>not</strong> handled due to lack of memory</li>
 </ul></p>

<p> For all cases except <a href="../namespaces/l2dbus.Dbus.html#HANDLER_RESULT_HANDLED">HANDLER_RESULT_HANDLED</a> the
 service object (if it has a handler) will be given the opportunity to process the request.
 If there are no handlers to satisfy the request or an error occurs the client will
 receive an appropriate error message.

    <h3>Parameters:</h3>
    <ul>
      <li><span class="parameter">interface</span>
        <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
       A valid D-Bus interface name to assign to the interface.</li>
      <li><span class="parameter">handler</span>
        <span class="types"><span class="type">func</span> or <span class="type">nil</span></span>
       An optional interface handler function or <strong>nil</strong> if none desired.</li>
      <li><span class="parameter">userToken</span>
        <span class="types">optional <span class="type">any</span></span>
       Optional client data associated with the handler. Will be passed
 to the handler when its invoked.</li>
    </ul>

    <h3>Returns:</h3>
    <ol>

          <span class="types"><span class="type">userdata</span></span>
        The userdata object representing the Interface.
    </ol>




</dd>
</dl>
    <h2><a name="Tables"></a>Tables</h2>
    <dl class="function">
    <dt>
    <a name = "IntrospectProp"></a>
    <strong>IntrospectProp</strong>
    </dt>
    <dd>
    This table that defines an individual D-Bus property item in an interface
 description.  An individual property is typically one of many in an array
 that is associated with an interface.</p>

<p>Possible values for the <em>access</em> field include <em>r</em> (read), <em>w</em> (write), <em>rw</em> or
<em>wr</em> (read/write).

    <h3>Fields:</h3>
    <ul>
      <li><span class="parameter">name</span>
       (string) [Req] The name of the D-Bus property.</li>
      <li><span class="parameter">sig</span>
       (string) [Req] The D-Bus signature of the property.</li>
      <li><span class="parameter">access</span>
       (string) [Req] The access permissions for the property (<strong>r</strong>, <strong>w</strong>, or <strong>rw</strong>).</li>
    </ul>



    <h3>see also:</h3>
    <ul>
         <a href="../namespaces/l2dbus.Interface.html#registerProperties">registerProperties</a>
    </ul>


</dd>
    <dt>
    <a name = "IntrospectArg"></a>
    <strong>IntrospectArg</strong>
    </dt>
    <dd>
    This table that defines an individual method/signal argument in an interface
 description.  An individual argument is typically one of many in an array
 that is associated with a method/signal.</p>

<p> The field <em>dir</em> can be either <em>in</em> or <em>out</em> but <strong>not</strong> <em>inout</em>. For D-Bus
 signal arguments this field isn't required because they are always <em>out</em>. For
 method arguments if the direction is omitted then it is assumed to be <em>in</em>.

    <h3>Fields:</h3>
    <ul>
      <li><span class="parameter">name</span>
       (string) [Opt] The name of the argument.</li>
      <li><span class="parameter">sig</span>
       (string) [Req] The D-Bus signature of the argument.</li>
      <li><span class="parameter">dir</span>
       (string) [Opt] The <em>direction</em> of the argument (<strong>in</strong> or <strong>out</strong>).</li>
    </ul>



    <h3>see also:</h3>
    <ul>
         <li><a href="../namespaces/l2dbus.Interface.html#registerMethods">registerMethods</a></li>
         <li><a href="../namespaces/l2dbus.Interface.html#registerSignals">registerSignals</a></li>
    </ul>


</dd>
    <dt>
    <a name = "IntrospectItem"></a>
    <strong>IntrospectItem</strong>
    </dt>
    <dd>
    This table that defines a D-Bus method or signal exposed by an interface.
 An <strong>array</strong> of these tables is passed to the <a href="../namespaces/l2dbus.Interface.html#registerMethods">registerMethods</a> or
 <a href="../namespaces/l2dbus.Interface.html#registerSignals">registerSignals</a> to register the methods/signals an interface exposes.

    <h3>Fields:</h3>
    <ul>
      <li><span class="parameter">name</span>
       (string) [Req] The name of the method or signal</li>
      <li><span class="parameter">args</span>
       (array) [Opt] An array of arguments of type <a href="../namespaces/l2dbus.Interface.html#IntrospectArg">IntrospectArg</a></li>
    </ul>





</dd>
</dl>
    <h2><a name="Interface"></a>Interface</h2>
    <dl class="function">
    <dt>
    <a name = "name"></a>
    <strong>name&nbsp;(interface)</strong>
    </dt>
    <dd>
     </p>

<p> Tests whether the connection is connected to the bus.</p>

<p> This method can be called to detect whether or not
 the provided connection is in fact connected to the
 bus.

    <h3>Parameters:</h3>
    <ul>
      <li><span class="parameter">interface</span>
        <span class="types"><span class="type">userdata</span></span>
       The Interface from which to retrieve the name.</li>
    </ul>

    <h3>Returns:</h3>
    <ol>

          <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.4">string</a> or <span class="type">nil</span></span>
         A string with the interface name or <strong>nil</strong> if it
 is unset.

    </ol>




</dd>
    <dt>
    <a name = "setData"></a>
    <strong>setData&nbsp;(interface, data)</strong>
    </dt>
    <dd>
     </p>

<p> Sets the user data to be passed to the request handler.

    <h3>Parameters:</h3>
    <ul>
      <li><span class="parameter">interface</span>
        <span class="types"><span class="type">userdata</span></span>
       The Interface to set the user data.</li>
      <li><span class="parameter">data</span>
        <span class="types"><span class="type">any</span></span>
       The user data. Can be any value.</li>
    </ul>





</dd>
    <dt>
    <a name = "getData"></a>
    <strong>getData&nbsp;(interface)</strong>
    </dt>
    <dd>
     </p>

<p> Gets the user data associated with the handler.

    <h3>Parameters:</h3>
    <ul>
      <li><span class="parameter">interface</span>
        <span class="types"><span class="type">userdata</span></span>
       The Interface to get the user data.</li>
    </ul>

    <h3>Returns:</h3>
    <ol>

          <span class="types"><span class="type">any</span></span>
        The user data associated with the interface handler.
    </ol>




</dd>
    <dt>
    <a name = "registerMethods"></a>
    <strong>registerMethods&nbsp;(interface, methods)</strong>
    </dt>
    <dd>
     </p>

<p> Registers methods supported by the interface.</p>

<p> This method registers D-Bus methods exposed by this interface.
 It does <strong>not</strong> support incremental registration of methods one
 at a time. Repeated calls will erase the previous methods before adding
 the new ones. The interface description should be encoded into a
 Lua table with the following structure:</p>
<pre><code> {
     {                      -- IntrospectItem[1]
         name = "SetPosition",
         args =
             {
                 {          -- IntrospectArg[1]
                 name = "x",
                 sig = "i",
                 dir = "in"
                 },
                 {          -- IntrospectArg[2]
                 name = "y"
                 sig = "i",
                 dir = "in"
                 },
                 ...        -- IntrospectArg[N]
              }
      },
      ...                   -- IntrospectItem[N]
  }
</code></pre>


<p> See <a href="../namespaces/l2dbus.Interface.html#IntrospectItem">IntrospectItem</a> and <a href="../namespaces/l2dbus.Interface.html#IntrospectArg">IntrospectArg</a> for the definition of the
 individual elements of the introspection table. Any error parsing or
 registering the methods will result in a Lua error being thrown.

    <h3>Parameters:</h3>
    <ul>
      <li><span class="parameter">interface</span>
        <span class="types"><span class="type">userdata</span></span>
       The Interface on which to register methods.</li>
      <li><span class="parameter">methods</span>
        <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
       The introspection data for the methods being
 registered with this interface.
 </li>
    </ul>





</dd>
    <dt>
    <a name = "clearMethods"></a>
    <strong>clearMethods&nbsp;(interface)</strong>
    </dt>
    <dd>
     </p>

<p> Clears or erases the methods supported by the interface.

    <h3>Parameters:</h3>
    <ul>
      <li><span class="parameter">interface</span>
        <span class="types"><span class="type">userdata</span></span>
       The Interface on which to clear the methods.</li>
    </ul>

    <h3>Returns:</h3>
    <ol>

          <span class="types"><span class="type">bool</span></span>
         Returns <strong>true</strong> if the methods are cleared successfully,
 <strong>false</strong> otherwise.

    </ol>




</dd>
    <dt>
    <a name = "registerSignals"></a>
    <strong>registerSignals&nbsp;(interface, signals)</strong>
    </dt>
    <dd>
     </p>

<p> Registers signal emitted by the interface.</p>

<p> This method registers D-Bus signals emitted by this interface.
 It does <strong>not</strong> support incremental registration of signals one
 at a time. Repeated calls will erase the previous signals before adding
 the new ones. The description of the signals should be encoded into a
 Lua table with the following structure:</p>
<pre><code> {
     {                      -- IntrospectItem[1]
         name = "PositionUpdate",
         args =
             {
                 {          -- IntrospectArg[1]
                 name = "x",
                 sig = "i",
                 },
                 {          -- IntrospectArg[2]
                 name = "y"
                 sig = "i",
                 },
                 ...        -- IntrospectArg[N]
              }
      },
      ...                   -- IntrospectItem[N]
  }
</code></pre>


<p> See <a href="../namespaces/l2dbus.Interface.html#IntrospectItem">IntrospectItem</a> and <a href="../namespaces/l2dbus.Interface.html#IntrospectArg">IntrospectArg</a> for the definition of the
 individual elements of the introspection table. Any error parsing or
 registering the signals will result in a Lua error being thrown.

    <h3>Parameters:</h3>
    <ul>
      <li><span class="parameter">interface</span>
        <span class="types"><span class="type">userdata</span></span>
       The Interface on which to register signals.</li>
      <li><span class="parameter">signals</span>
        <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
       The introspection data for the signals being
 registered with this interface.
 </li>
    </ul>





</dd>
    <dt>
    <a name = "clearSignals"></a>
    <strong>clearSignals&nbsp;(interface)</strong>
    </dt>
    <dd>
     </p>

<p> Clears or erases the signals supported by the interface.

    <h3>Parameters:</h3>
    <ul>
      <li><span class="parameter">interface</span>
        <span class="types"><span class="type">userdata</span></span>
       The Interface on which to clear the signals.</li>
    </ul>

    <h3>Returns:</h3>
    <ol>

          <span class="types"><span class="type">bool</span></span>
         Returns <strong>true</strong> if the signals are cleared successfully,
 <strong>false</strong> otherwise.

    </ol>




</dd>
    <dt>
    <a name = "registerProperties"></a>
    <strong>registerProperties&nbsp;(interface, properties)</strong>
    </dt>
    <dd>
     </p>

<p> Registers properties supported by the interface.</p>

<p> This method registers D-Bus properties supported by this interface.
 It does <strong>not</strong> support incremental registration of properties one
 at a time. Repeated calls will erase the previous properties before adding
 the new ones. The properties should be encoded into a Lua table with the
 following structure:</p>
<pre><code> {
     {                      --  IntrospectProp[1]
         name = "Time",
         sig = "i",
         access = "r"
     },
     {                      --  IntrospectProp[2]
         name = "Velocity",
         sig = "d",
         access = "rw"
     },
     ...                    --  IntrospectProp[N]
  }
</code></pre>


<p> See <a href="../namespaces/l2dbus.Interface.html#IntrospectProp">IntrospectProp</a> for the definition of the individual elements of the
 introspective properties table. Any error parsing or
 registering the properties will result in a Lua error being thrown. Although
 these properties will appear as part of the D-Bus Introspection data if a
 client should introspect a service implementing this interface, it is implied
 that the service must also implement the
 <a href="http://dbus.freedesktop.org/doc/dbus-specification.html#standard-interfaces-properties">Properties</a>
 interface in order for the client to directly access them.

    <h3>Parameters:</h3>
    <ul>
      <li><span class="parameter">interface</span>
        <span class="types"><span class="type">userdata</span></span>
       The Interface on which to register properties.</li>
      <li><span class="parameter">properties</span>
        <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
       The introspection data for the properties being
 registered with this interface.
 </li>
    </ul>





</dd>
    <dt>
    <a name = "clearProperties"></a>
    <strong>clearProperties&nbsp;(interface)</strong>
    </dt>
    <dd>
     </p>

<p> Clears or erases the properties supported by the interface.

    <h3>Parameters:</h3>
    <ul>
      <li><span class="parameter">interface</span>
        <span class="types"><span class="type">userdata</span></span>
       The Interface on which to clear the properties.</li>
    </ul>

    <h3>Returns:</h3>
    <ol>

          <span class="types"><span class="type">bool</span></span>
         Returns <strong>true</strong> if the properties are cleared successfully,
 <strong>false</strong> otherwise.

    </ol>




</dd>
    <dt>
    <a name = "introspect"></a>
    <strong>introspect&nbsp;(interface)</strong>
    </dt>
    <dd>
     </p>

<p> Returns the D-Bus XML introspection data for this interface only.</p>

<p> This isn't usually called directly by client code but is is collected
 by a service implementing the
 <a href="http://dbus.freedesktop.org/doc/dbus-specification.html#standard-interfaces-introspectable">Introspectable</a> interface.
 See <a href="../namespaces/l2dbus.Introspection.html#">l2dbus.Introspection</a> for more details.

    <h3>Parameters:</h3>
    <ul>
      <li><span class="parameter">interface</span>
        <span class="types"><span class="type">userdata</span></span>
       The Interface to be introspected.</li>
    </ul>

    <h3>Returns:</h3>
    <ol>

          <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         Returns D-Bus XML introspection data if the interface has
 registered methods, signals, or properties, otherwise <strong>nil</strong>.

    </ol>




</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.3</a></i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
